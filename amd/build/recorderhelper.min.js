define(["jquery","core/log","mod_readaloud/cloudpoodllloader"],function(a,b,c){"use strict";return b.debug("Readaloud helper: initialising"),{status:"stopped",init:function(a,b,d,e,f){var g=this;c.init(a.recorderid,function(a){switch(a.type){case"recording":"started"===a.action?(g.startbuttonclick(),b(a)):"stopped"===a.action&&(g.stopbuttonclick(),d(a));break;case"awaitingprocessing":"posted"!==g.status&&e(a),g.status="posted";break;case"speech":f(a);break;case"error":alert("PROBLEM:"+a.message)}})},stopbuttonclick:function(){this.status="stopped"},startbuttonclick:function(){this.status="started"}}});